{"ast":null,"code":"import { addFoodtruck, setAllFoodtrucks, fetchFoodtruck } from \"../reducers/foodtruckReducer\";\nimport { updateFoodtruckForm, resetFoodtruckForm } from \"./handleNewFoodtruckForm\";\nimport axios from \"axios\";\nexport const getAllFoodtrucks = accountId => {\n  return (dispatch, getState) => {\n    console.log(getState());\n    return fetch(`http://localhost:3000/api/v1/accounts/${accountId}/food_trucks`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => res.json()).then(response => {\n      if (response.error) {\n        alert(response.error);\n      } else {\n        dispatch(setAllFoodtrucks(response.data));\n      }\n    }).catch(console.log);\n  };\n};\nexport const getFoodtruck = (accountId, foodtruckId) => {\n  return dispatch => {\n    return fetch(`http://localhost:3000/api/v1/accounts/${accountId}/food_trucks/${foodtruckId}`), {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }.then(res => res.json()).then(response => {\n      debugger;\n\n      if (response.error) {\n        alert(response.error);\n      } else {\n        dispatch(fetchFoodtruck(response.data));\n      }\n    }).catch(console.log);\n  };\n};\nexport const updateFoodtruck = (foodtruckData, accountId, foodtruckId) => {\n  return dispatch => {\n    const sendableFoodtruckData = {\n      name: foodtruckData.name,\n      location: foodtruckData.location,\n      category: foodtruckData.category,\n      hours: foodtruckData.hours,\n      score: foodtruckData.score,\n      description: foodtruckData.description,\n      accountId: foodtruckData.accountId\n    };\n    return fetch(`http://localhost:3000/api/v1/accounts/${accountId}/food_trucks/${foodtruckId}`), {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(sendableFoodtruckData)\n    }.then(res => res.json()).then(response => {\n      if (response.error) {\n        alert(response.error);\n      } else {\n        dispatch(updateFoodtruck(response.data));\n        dispatch(updateFoodtruckForm());\n      }\n    }).catch(console.log);\n  };\n};\nexport const createFoodtruck = foodData => {\n  const foodtruckData = {\n    food_trucks: foodData\n  };\n  const url = `http://localhost:3000/api/v1/accounts/${foodtruckData.account_id}/food_trucks`;\n  return dispatch => {\n    return fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(foodtruckData)\n    }).then(resp => resp.json()).then(resp => {\n      debugger;\n\n      if (resp.error) {\n        alert(resp.error);\n      } else {\n        dispatch(addFoodtruck(resp.data));\n        dispatch(resetFoodtruckForm());\n        alert(\"account created successfuly.\");\n      }\n    }).catch(console.log);\n  };\n};","map":{"version":3,"sources":["/Users/nadavschwartz/Desktop/food_truck-frontend/food_truck_front/src/actions/foodTruck.js"],"names":["addFoodtruck","setAllFoodtrucks","fetchFoodtruck","updateFoodtruckForm","resetFoodtruckForm","axios","getAllFoodtrucks","accountId","dispatch","getState","console","log","fetch","method","headers","then","res","json","response","error","alert","data","catch","getFoodtruck","foodtruckId","updateFoodtruck","foodtruckData","sendableFoodtruckData","name","location","category","hours","score","description","body","JSON","stringify","createFoodtruck","foodData","food_trucks","url","account_id","resp"],"mappings":"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","sourcesContent":["import {\n  addFoodtruck,\n  setAllFoodtrucks,\n  fetchFoodtruck,\n} from \"../reducers/foodtruckReducer\";\nimport {\n  updateFoodtruckForm,\n  resetFoodtruckForm,\n} from \"./handleNewFoodtruckForm\";\nimport axios from \"axios\";\n\nexport const getAllFoodtrucks = (accountId) => {\n  return (dispatch, getState) => {\n    console.log(getState());\n    return fetch(\n      `http://localhost:3000/api/v1/accounts/${accountId}/food_trucks`,\n      {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    )\n      .then((res) => res.json())\n      .then((response) => {\n        if (response.error) {\n          alert(response.error);\n        } else {\n          dispatch(setAllFoodtrucks(response.data));\n        }\n      })\n      .catch(console.log);\n  };\n};\n\nexport const getFoodtruck = (accountId, foodtruckId) => {\n  return (dispatch) => {\n    return (\n      fetch(\n        `http://localhost:3000/api/v1/accounts/${accountId}/food_trucks/${foodtruckId}`\n      ),\n      {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }\n        .then((res) => res.json())\n        .then((response) => {\n          debugger;\n          if (response.error) {\n            alert(response.error);\n          } else {\n            dispatch(fetchFoodtruck(response.data));\n          }\n        })\n        .catch(console.log)\n    );\n  };\n};\n\nexport const updateFoodtruck = (foodtruckData, accountId, foodtruckId) => {\n  return (dispatch) => {\n    const sendableFoodtruckData = {\n      name: foodtruckData.name,\n      location: foodtruckData.location,\n      category: foodtruckData.category,\n      hours: foodtruckData.hours,\n      score: foodtruckData.score,\n      description: foodtruckData.description,\n      accountId: foodtruckData.accountId,\n    };\n    return (\n      fetch(\n        `http://localhost:3000/api/v1/accounts/${accountId}/food_trucks/${foodtruckId}`\n      ),\n      {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(sendableFoodtruckData),\n      }\n\n        .then((res) => res.json())\n        .then((response) => {\n          if (response.error) {\n            alert(response.error);\n          } else {\n            dispatch(updateFoodtruck(response.data));\n            dispatch(updateFoodtruckForm());\n          }\n        })\n        .catch(console.log)\n    );\n  };\n};\n\nexport const createFoodtruck = (foodData) => {\n  const foodtruckData = {\n    food_trucks: foodData,\n  };\n  const url = `http://localhost:3000/api/v1/accounts/${foodtruckData.account_id}/food_trucks`;\n  return (dispatch) => {\n    return fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(foodtruckData),\n    })\n      .then((resp) => resp.json())\n      .then((resp) => {\n        debugger;\n        if (resp.error) {\n          alert(resp.error);\n        } else {\n          dispatch(addFoodtruck(resp.data));\n          dispatch(resetFoodtruckForm());\n          alert(\"account created successfuly.\");\n        }\n      })\n      .catch(console.log);\n  };\n};\n"]},"metadata":{},"sourceType":"module"}