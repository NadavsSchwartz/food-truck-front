{"ast":null,"code":"import { addFoodtruck, setAllFoodtrucks, fetchFoodtruck, deleteFoodtruck, updateFoodtruckData } from \"../reducers/foodtruckReducer\";\nimport { updateFoodtruckForm, resetFoodtruckForm } from \"./handleNewFoodtruckForm\";\nimport { useHistory } from \"react-router\";\nexport const getAllFoodtrucks = () => {\n  return (dispatch, getState) => {\n    console.log(getState());\n    return fetch(`http://localhost:3000/api/v1/foodtrucks`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => res.json()).then(response => {\n      if (response.error) {\n        alert(response.error);\n      } else {\n        dispatch(setAllFoodtrucks(response));\n      }\n    }).catch(console.log);\n  };\n};\nexport const getFoodtruck = (accountId, foodtruckId) => {\n  return dispatch => {\n    return fetch(`http://localhost:3000/api/v1/accounts/${accountId}/food_trucks/${foodtruckId}`), {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }.then(res => res.json()).then(response => {\n      debugger;\n\n      if (response.error) {\n        alert(response.error);\n      } else {\n        dispatch(fetchFoodtruck(response));\n      }\n    }).catch(console.log);\n  };\n};\nexport const updateFoodtruck = (foodData, accountId, foodtruckId, history) => {\n  return dispatch => {\n    const url = `http://localhost:3000/api/v1/accounts/${accountId}/foodtrucks/${foodtruckId}`;\n    const foodtruckData = {\n      food_truck: foodData\n    };\n    return fetch(url, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(foodtruckData)\n    }).then(res => res.json()).then(response => {\n      if (response.error) {\n        alert(response.error);\n      } else {\n        dispatch(updateFoodtruckData(response));\n        dispatch(resetFoodtruckForm());\n        alert(\"Foodtruck data updated!\");\n        history.push(`/accounts/${accountId}/foodtrucks/${foodtruckId}`);\n      }\n    }).catch(console.log);\n  };\n};\nexport const createFoodtruck = (foodData, accountId) => {\n  return dispatch => {\n    const foodtruckData = {\n      food_truck: foodData\n    };\n    const url = `http://localhost:3000/api/v1/accounts/${accountId}/foodtrucks`;\n    return fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(foodtruckData)\n    }).then(response => response.json()).then(response => {\n      if (response.error) {\n        alert(response.error);\n      } else {\n        dispatch(addFoodtruck(response));\n        dispatch(resetFoodtruckForm());\n        alert(\"New Foodtruck Added successfuly.\");\n      }\n    }).catch(console.log);\n  };\n};\nexport const removeFoodtruck = (foodtruckId, accountId, history) => {\n  const url = `http://localhost:3000/api/v1/accounts/${accountId}/foodtrucks/${foodtruckId}`;\n  return dispatch => {\n    return fetch(url, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(response => response.json()).then(response => {\n      if (response.error) {\n        alert(response.error);\n      } else {\n        dispatch(deleteFoodtruck(response));\n        alert(\"Foodtruck deleted successfully.\");\n        history.push(\"/\");\n      }\n    }).catch(console.log);\n  };\n};","map":{"version":3,"sources":["/Users/nadavschwartz/Desktop/food_truck-frontend/food_truck_front/src/actions/foodTruck.js"],"names":["addFoodtruck","setAllFoodtrucks","fetchFoodtruck","deleteFoodtruck","updateFoodtruckData","updateFoodtruckForm","resetFoodtruckForm","useHistory","getAllFoodtrucks","dispatch","getState","console","log","fetch","method","headers","then","res","json","response","error","alert","catch","getFoodtruck","accountId","foodtruckId","updateFoodtruck","foodData","history","url","foodtruckData","food_truck","body","JSON","stringify","push","createFoodtruck","removeFoodtruck"],"mappings":"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","sourcesContent":["import {\n  addFoodtruck,\n  setAllFoodtrucks,\n  fetchFoodtruck,\n  deleteFoodtruck,\n  updateFoodtruckData,\n} from \"../reducers/foodtruckReducer\";\nimport {\n  updateFoodtruckForm,\n  resetFoodtruckForm,\n} from \"./handleNewFoodtruckForm\";\nimport { useHistory } from \"react-router\";\n\nexport const getAllFoodtrucks = () => {\n  return (dispatch, getState) => {\n    console.log(getState());\n    return fetch(`http://localhost:3000/api/v1/foodtrucks`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((res) => res.json())\n      .then((response) => {\n        if (response.error) {\n          alert(response.error);\n        } else {\n          dispatch(setAllFoodtrucks(response));\n        }\n      })\n      .catch(console.log);\n  };\n};\n\nexport const getFoodtruck = (accountId, foodtruckId) => {\n  return (dispatch) => {\n    return (\n      fetch(\n        `http://localhost:3000/api/v1/accounts/${accountId}/food_trucks/${foodtruckId}`\n      ),\n      {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }\n        .then((res) => res.json())\n        .then((response) => {\n          debugger;\n          if (response.error) {\n            alert(response.error);\n          } else {\n            dispatch(fetchFoodtruck(response));\n          }\n        })\n        .catch(console.log)\n    );\n  };\n};\n\nexport const updateFoodtruck = (foodData, accountId, foodtruckId, history) => {\n  return (dispatch) => {\n    const url = `http://localhost:3000/api/v1/accounts/${accountId}/foodtrucks/${foodtruckId}`;\n    const foodtruckData = {\n      food_truck: foodData,\n    };\n    return fetch(url, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(foodtruckData),\n    })\n      .then((res) => res.json())\n      .then((response) => {\n        if (response.error) {\n          alert(response.error);\n        } else {\n          dispatch(updateFoodtruckData(response));\n          dispatch(resetFoodtruckForm());\n          alert(\"Foodtruck data updated!\");\n          history.push(`/accounts/${accountId}/foodtrucks/${foodtruckId}`);\n        }\n      })\n      .catch(console.log);\n  };\n};\n\nexport const createFoodtruck = (foodData, accountId) => {\n  return (dispatch) => {\n    const foodtruckData = {\n      food_truck: foodData,\n    };\n    const url = `http://localhost:3000/api/v1/accounts/${accountId}/foodtrucks`;\n    return fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(foodtruckData),\n    })\n      .then((response) => response.json())\n      .then((response) => {\n        if (response.error) {\n          alert(response.error);\n        } else {\n          dispatch(addFoodtruck(response));\n          dispatch(resetFoodtruckForm());\n          alert(\"New Foodtruck Added successfuly.\");\n        }\n      })\n      .catch(console.log);\n  };\n};\n\nexport const removeFoodtruck = (foodtruckId, accountId, history) => {\n  const url = `http://localhost:3000/api/v1/accounts/${accountId}/foodtrucks/${foodtruckId}`;\n\n  return (dispatch) => {\n    return fetch(url, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((response) => response.json())\n      .then((response) => {\n        if (response.error) {\n          alert(response.error);\n        } else {\n          dispatch(deleteFoodtruck(response));\n          alert(\"Foodtruck deleted successfully.\");\n          history.push(\"/\");\n        }\n      })\n      .catch(console.log);\n  };\n};\n"]},"metadata":{},"sourceType":"module"}